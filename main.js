'use strict';(function(){'use strict';function a(m){for(var n=m.length-1;0<n;n-=1){var o=Math.floor((n+1)*Math.random()),p=m[o];m[o]=m[n],m[n]=p}return m}function b(){var m=a(h.split(''));return m.some(function(n,o){return n===h[o]})?b():m}function c(){var m=b();return Array.prototype.reduce.call(h,function(n,o,p){return n[o]=m[p],n},{})}function d(m,n){return Array.prototype.map.call(m,function(o){return o in n?n[o]:o}).join('')}function e(m){k&&j.removeEventListener('keydown',k),m=m.toUpperCase();var n=c(),o=d(m,n);j.innerHTML=o.split('').map(function(q){var r=' '===q?'&nbsp;':q;return'<div class="char">\n      <div>'+r+'</div>\n      <div '+(q in n?'contenteditable class="'+q+'"':'')+'>\n        '+(q in n?'':r)+'\n      </div>\n    </div>'}).join('');var p=Array.from(j.querySelectorAll('[contenteditable]'));k=f.bind(null,n,p),j.addEventListener('keydown',k),p[0].focus()}function f(m,n,o){var p=o.srcElement,q;if(p.isContentEditable){var r=o.key.toUpperCase();switch(r){case'TAB':case'ESCAPE':return;case'ARROWLEFT':q=n.indexOf(p),0<q&&n[q-1].focus();break;case'ARROWRIGHT':q=n.indexOf(p),q+1<n.length&&n[q+1].focus();break;case'BACKSPACE':case'DELETE':g(p.className,'');break;default:if(r in m){g(p.className,r),q=n.indexOf(p);var s=1+n.slice(q+1).findIndex(function(t){return t.className!==p.className});0<s&&n[q+s].focus()}}o.preventDefault()}}function g(m,n){j.querySelectorAll('.'+m).forEach(function(o){o.innerText=n})}var h='ABCDEFGHIJKLMNOPQRSTUVWXYZ',j=document.getElementById('game'),k=null,l=['A word of kindness is seldom spoken in vain, while witty sayings are as easily lost as the pearls slipping from a broken string.'];document.getElementById('restart').addEventListener('click',function(){e(l[0])}),e(l[0])})();
